<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Life Calendar</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <main class="page-wrap">
    <a class="back" href="index.html">← Back to Lab</a>
    <h1>Life Calendar</h1>
    <p>Each square is one week. See your lived weeks, projected weeks, and the weeks left for what matters most.</p>

    <section class="panel two-col">
      <div>
        <label for="age">Current age</label>
        <input id="age" type="number" min="1" max="110" value="32" />
        <label for="lifespan">Expected lifespan</label>
        <input id="lifespan" type="number" min="10" max="120" value="88" />
      </div>
      <div>
        <label for="goal">A meaningful project or relationship to prioritize</label>
        <input id="goal" type="text" value="Write the book that helps my children understand courage" />
        <button id="render">Render Life Calendar</button>
      </div>
    </section>

    <section id="summary" class="result"></section>
    <section id="calendar" class="panel"></section>
  </main>

  <script>
    const summary = document.getElementById('summary');
    const calendar = document.getElementById('calendar');

    function renderCalendar() {
      const age = Number(document.getElementById('age').value);
      const lifespan = Number(document.getElementById('lifespan').value);
      const goal = document.getElementById('goal').value.trim() || 'your highest priority';
      const totalWeeks = lifespan * 52;
      const livedWeeks = Math.min(totalWeeks, Math.max(0, Math.floor(age * 52)));
      const leftWeeks = Math.max(0, totalWeeks - livedWeeks);
      const focusWeeks = Math.floor(leftWeeks * 0.15);

      summary.innerHTML = `
        <h2>Perspective Snapshot</h2>
        <p><strong>Lived:</strong> ${livedWeeks.toLocaleString()} weeks • <strong>Remaining:</strong> ${leftWeeks.toLocaleString()} weeks</p>
        <p>If you dedicated just 15% of remaining weeks to <em>${goal}</em>, you'd invest about <strong>${focusWeeks.toLocaleString()} focused weeks</strong>.</p>
      `;

      let html = '';
      for (let i = 0; i < totalWeeks; i++) {
        const cls = i < livedWeeks ? 'week used' : (i < livedWeeks + focusWeeks ? 'week highlight' : 'week');
        html += `<span class="${cls}" title="Week ${i + 1}"></span>`;
      }
      calendar.innerHTML = `<h2>Week-by-Week View</h2><div class="week-grid">${html}</div>`;
    }

    document.getElementById('render').addEventListener('click', renderCalendar);
    renderCalendar();
  </script>
</body>
</html>
